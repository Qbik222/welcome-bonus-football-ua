"use strict";

//Forecast slider
function setupForecastSlider(sliderSelector, itemSelector, buttonLeftSelector, buttonRightSelector, indexSlideScale) {
  var currentSlide = 0;
  var initialX = 0;
  var dragging = false;
  var carousel = document.querySelector(sliderSelector);
  var slides = document.querySelectorAll(itemSelector);
  var totalSlides = slides.length;
  function refreshCarousel() {
    slides.forEach(function (slide, index) {
      var offset = index - currentSlide;
      var slideTranslate = 50;
      // if (window.innerWidth <= 1100){
      //     slideTranslate = 47
      // }
      var newPosition = offset * slideTranslate;
      if (offset > totalSlides / 2) {
        newPosition -= totalSlides * slideTranslate;
      } else if (offset < -totalSlides / 2) {
        newPosition += totalSlides * slideTranslate;
      }
      var scale = index === currentSlide ? 1 : indexSlideScale;
      slide.style.transform = "translateX(".concat(newPosition, "%) scale(").concat(scale, ")");
      slide.style.zIndex = index === currentSlide ? 3 : 1;
      var isVisible = Math.abs(offset) <= 1 || index === 0 && currentSlide === totalSlides - 1 || index === totalSlides - 1 && currentSlide === 0;
      slide.classList.toggle('hidden', !isVisible);
      slide.classList.toggle('active', index === currentSlide);
      slide.classList.remove('left-slide', 'right-slide');
      if (offset === 1 || currentSlide === totalSlides - 1 && index === 0) {
        slide.classList.add('right-slide');
      } else if (offset === -1 || currentSlide === 0 && index === totalSlides - 1) {
        slide.classList.add('left-slide');
      }
    });
  }
  function shiftSlide(direction) {
    currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
    refreshCarousel();
  }
  function handleDragStart(event) {
    dragging = true;
    initialX = event.clientX || event.touches[0].clientX;
  }
  function handleDragMove(event) {
    if (!dragging) return;
    var currentX = event.clientX || event.touches[0].clientX;
    var diffX = currentX - initialX;
    if (Math.abs(diffX) > 50) {
      shiftSlide(diffX > 0 ? -1 : 1);
      dragging = false;
    }
  }
  function handleDragEnd() {
    dragging = false;
  }
  var leftButtons = document.querySelectorAll(buttonLeftSelector);
  var rightButtons = document.querySelectorAll(buttonRightSelector);
  leftButtons.forEach(function (btn) {
    btn.addEventListener('click', function () {
      shiftSlide(-1);
    });
  });
  rightButtons.forEach(function (btn) {
    btn.addEventListener('click', function () {
      shiftSlide(1);
    });
  });
  carousel.addEventListener('mousedown', handleDragStart);
  carousel.addEventListener('touchstart', handleDragStart);
  document.addEventListener('mousemove', handleDragMove);
  document.addEventListener('touchmove', handleDragMove);
  document.addEventListener('mouseup', handleDragEnd);
  document.addEventListener('touchend', handleDragEnd);
  refreshCarousel();
}
setupForecastSlider('.videos__slider', '.videos__item', '.videos__control-left', '.videos__control-right', 0.56);
var sliderItems = document.querySelectorAll(".videos__item");
sliderItems.forEach(function (item, i) {
  var videoIframe = item.querySelector(".videoIframe");
  var videoPlayBtn = item.querySelector(".videoPlayBtn");
  var parentElement = videoIframe.parentElement;
  videoPlayBtn.addEventListener("click", function () {
    videoIframe.src = videoIframe.src + '&autoplay=1&start=1&fs=0&mute=1';
    videoIframe.style.display = "block";
    videoPlayBtn.style.display = "none";
    parentElement.style.border = "none";
  });
});
var blackBtn = document.querySelector(".dark-btn");
blackBtn.addEventListener("click", function () {
  document.body.classList.toggle("dark");
  document.body.classList.toggle("light");
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2V0dXBGb3JlY2FzdFNsaWRlciIsInNsaWRlclNlbGVjdG9yIiwiaXRlbVNlbGVjdG9yIiwiYnV0dG9uTGVmdFNlbGVjdG9yIiwiYnV0dG9uUmlnaHRTZWxlY3RvciIsImluZGV4U2xpZGVTY2FsZSIsImN1cnJlbnRTbGlkZSIsImluaXRpYWxYIiwiZHJhZ2dpbmciLCJjYXJvdXNlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b3RhbFNsaWRlcyIsImxlbmd0aCIsInJlZnJlc2hDYXJvdXNlbCIsImZvckVhY2giLCJzbGlkZSIsImluZGV4Iiwib2Zmc2V0Iiwic2xpZGVUcmFuc2xhdGUiLCJuZXdQb3NpdGlvbiIsInNjYWxlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJjb25jYXQiLCJ6SW5kZXgiLCJpc1Zpc2libGUiLCJNYXRoIiwiYWJzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiYWRkIiwic2hpZnRTbGlkZSIsImRpcmVjdGlvbiIsImhhbmRsZURyYWdTdGFydCIsImV2ZW50IiwiY2xpZW50WCIsInRvdWNoZXMiLCJoYW5kbGVEcmFnTW92ZSIsImN1cnJlbnRYIiwiZGlmZlgiLCJoYW5kbGVEcmFnRW5kIiwibGVmdEJ1dHRvbnMiLCJyaWdodEJ1dHRvbnMiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwic2xpZGVySXRlbXMiLCJpdGVtIiwiaSIsInZpZGVvSWZyYW1lIiwidmlkZW9QbGF5QnRuIiwicGFyZW50RWxlbWVudCIsInNyYyIsImRpc3BsYXkiLCJib3JkZXIiLCJibGFja0J0biIsImJvZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQSxTQUFTQSxtQkFBbUJBLENBQUNDLGNBQWMsRUFBRUMsWUFBWSxFQUFFQyxrQkFBa0IsRUFBRUMsbUJBQW1CLEVBQUVDLGVBQWUsRUFBRTtFQUNqSCxJQUFJQyxZQUFZLEdBQUcsQ0FBQztFQUNw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Q1YsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQUs7RUFDcEN0QyxRQUFRLENBQUNpRCxJQUFJLENBQUM1QixTQUFTLENBQUNDLE1BQU0sQ0FBQyxNQUFNLENBQUM7RUFDdEN0QixRQUFRLENBQUNpRCxJQUFJLENBQUM1QixTQUFTLENBQUNDLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFM0MsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL0ZvcmVjYXN0IHNsaWRlclxuZnVuY3Rpb24gc2V0dXBGb3JlY2FzdFNsaWRlcihzbGlkZXJTZWxlY3RvciwgaXRlbVNlbGVjdG9yLCBidXR0b25MZWZ0U2VsZWN0b3IsIGJ1dHRvblJpZ2h0U2VsZWN0b3IsIGluZGV4U2xpZGVTY2FsZSkge1xuICAgIGxldCBjdXJyZW50U2xpZGUgPSAwO1xuICAgIGxldCBpbml0aWFsWCA9IDA7XG4gICAgbGV0IGRyYWdnaW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCBjYXJvdXNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyU2VsZWN0b3IpO1xuICAgIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbVNlbGVjdG9yKTtcbiAgICBjb25zdCB0b3RhbFNsaWRlcyA9IHNsaWRlcy5sZW5ndGg7XG5cbiAgICBmdW5jdGlvbiByZWZyZXNoQ2Fyb3VzZWwoKSB7XG4gICAgICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4IC0gY3VycmVudFNsaWRlO1xuICAgICAgICAgICAgbGV0IHNsaWRlVHJhbnNsYXRlID0gNTBcbiAgICAgICAgICAgIC8vIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMTAwKXtcbiAgICAgICAgICAgIC8vICAgICBzbGlkZVRyYW5zbGF0ZSA9IDQ3XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBsZXQgbmV3UG9zaXRpb24gPSBvZmZzZXQgKiBzbGlkZVRyYW5zbGF0ZTtcblxuXG4gICAgICAgICAgICBpZiAob2Zmc2V0ID4gdG90YWxTbGlkZXMgLyAyKSB7XG4gICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gLT0gdG90YWxTbGlkZXMgKiBzbGlkZVRyYW5zbGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2Zmc2V0IDwgLXRvdGFsU2xpZGVzIC8gMikge1xuICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uICs9IHRvdGFsU2xpZGVzICogc2xpZGVUcmFuc2xhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gaW5kZXggPT09IGN1cnJlbnRTbGlkZSA/IDEgOiBpbmRleFNsaWRlU2NhbGU7XG5cbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7bmV3UG9zaXRpb259JSkgc2NhbGUoJHtzY2FsZX0pYDtcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLnpJbmRleCA9IGluZGV4ID09PSBjdXJyZW50U2xpZGUgPyAzIDogMTtcblxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gTWF0aC5hYnMob2Zmc2V0KSA8PSAxIHx8IChpbmRleCA9PT0gMCAmJiBjdXJyZW50U2xpZGUgPT09IHRvdGFsU2xpZGVzIC0gMSkgfHwgKGluZGV4ID09PSB0b3RhbFNsaWRlcyAtIDEgJiYgY3VycmVudFNsaWRlID09PSAwKTtcbiAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFpc1Zpc2libGUpO1xuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaW5kZXggPT09IGN1cnJlbnRTbGlkZSk7XG5cbiAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2xlZnQtc2xpZGUnLCAncmlnaHQtc2xpZGUnKTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT09IDEgfHwgKGN1cnJlbnRTbGlkZSA9PT0gdG90YWxTbGlkZXMgLSAxICYmIGluZGV4ID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0LXNsaWRlJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PT0gLTEgfHwgKGN1cnJlbnRTbGlkZSA9PT0gMCAmJiBpbmRleCA9PT0gdG90YWxTbGlkZXMgLSAxKSkge1xuICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ2xlZnQtc2xpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hpZnRTbGlkZShkaXJlY3Rpb24pIHtcbiAgICAgICAgY3VycmVudFNsaWRlID0gKGN1cnJlbnRTbGlkZSArIGRpcmVjdGlvbiArIHRvdGFsU2xpZGVzKSAlIHRvdGFsU2xpZGVzO1xuICAgICAgICByZWZyZXNoQ2Fyb3VzZWwoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICBpbml0aWFsWCA9IGV2ZW50LmNsaWVudFggfHwgZXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGlmICghZHJhZ2dpbmcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjdXJyZW50WCA9IGV2ZW50LmNsaWVudFggfHwgZXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICBjb25zdCBkaWZmWCA9IGN1cnJlbnRYIC0gaW5pdGlhbFg7XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKGRpZmZYKSA+IDUwKSB7XG4gICAgICAgICAgICBzaGlmdFNsaWRlKGRpZmZYID4gMCA/IC0xIDogMSk7XG4gICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZCgpIHtcbiAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsZWZ0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYnV0dG9uTGVmdFNlbGVjdG9yKVxuICAgIGNvbnN0IHJpZ2h0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYnV0dG9uUmlnaHRTZWxlY3RvcilcbiAgICBsZWZ0QnV0dG9ucy5mb3JFYWNoKGJ0biAgPT4ge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzaGlmdFNsaWRlKC0xKTtcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIHJpZ2h0QnV0dG9ucy5mb3JFYWNoKGJ0biAgPT4ge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzaGlmdFNsaWRlKDEpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBjYXJvdXNlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVEcmFnU3RhcnQpO1xuICAgIGNhcm91c2VsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlRHJhZ01vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZURyYWdNb3ZlKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZURyYWdFbmQpO1xuXG4gICAgcmVmcmVzaENhcm91c2VsKCk7XG59XG5cbnNldHVwRm9yZWNhc3RTbGlkZXIoJy52aWRlb3NfX3NsaWRlcicsICcudmlkZW9zX19pdGVtJywgJy52aWRlb3NfX2NvbnRyb2wtbGVmdCcsICcudmlkZW9zX19jb250cm9sLXJpZ2h0JywgMC41Nik7XG5cblxuY29uc3Qgc2xpZGVySXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnZpZGVvc19faXRlbVwiKTtcbnNsaWRlckl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+e1xuICAgIGNvbnN0IHZpZGVvSWZyYW1lID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvSWZyYW1lXCIpXG4gICAgY29uc3QgdmlkZW9QbGF5QnRuID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvUGxheUJ0blwiKVxuICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSB2aWRlb0lmcmFtZS5wYXJlbnRFbGVtZW50XG4gICAgdmlkZW9QbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICAgICAgdmlkZW9JZnJhbWUuc3JjID0gdmlkZW9JZnJhbWUuc3JjICsgJyZhdXRvcGxheT0xJnN0YXJ0PTEmZnM9MCZtdXRlPTEnO1xuICAgICAgICB2aWRlb0lmcmFtZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgIHZpZGVvUGxheUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgcGFyZW50RWxlbWVudC5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIlxuXG5cbiAgICB9KVxufSlcblxuXG5cbmNvbnN0IGJsYWNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXJrLWJ0blwiKVxuXG5ibGFja0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGFya1wiKVxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImxpZ2h0XCIpXG5cbn0pIl19
